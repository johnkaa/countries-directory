import{_ as D,a as q,u as $,b as x}from"./v8qDQE4o.js";import{_ as p,m as U,n as w,f as k,q as V,s as b,v as z,x as O,o,g as f,w as u,c as r,y as m,z as g,h as v,A as P,B as j,b as d,a as i,t as C,l as _,p as E,e as J,C as M,i as R,D as Q,F as S,r as F}from"./D_wACWrr.js";import{u as T}from"./Diym53A2.js";import{_ as X}from"./C4022fHQ.js";const G={base:"",background:"bg-white dark:bg-gray-900",divide:"divide-y divide-gray-200 dark:divide-gray-800",ring:"ring-1 ring-gray-200 dark:ring-gray-800",rounded:"rounded-lg",shadow:"shadow",body:{base:"",background:"",padding:"px-4 py-5 sm:p-6"},header:{base:"",background:"",padding:"px-4 py-5 sm:px-6"},footer:{base:"",background:"",padding:"px-4 py-4 sm:px-6"}},H=U(w.ui.strategy,w.ui.card,G),K=k({inheritAttrs:!1,props:{as:{type:String,default:"div"},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(e){const{ui:t,attrs:s}=T("card",V(e,"ui"),H),n=b(()=>z(O(t.value.base,t.value.rounded,t.value.divide,t.value.ring,t.value.shadow,t.value.background),e.class));return{ui:t,attrs:s,cardClass:n}}});function W(e,t,s,n,c,a){return o(),f(j(e.$attrs.onSubmit?"form":e.as),P({class:e.cardClass},e.attrs),{default:u(()=>[e.$slots.header?(o(),r("div",{key:0,class:m([e.ui.header.base,e.ui.header.padding,e.ui.header.background])},[g(e.$slots,"header")],2)):v("",!0),e.$slots.default?(o(),r("div",{key:1,class:m([e.ui.body.base,e.ui.body.padding,e.ui.body.background])},[g(e.$slots,"default")],2)):v("",!0),e.$slots.footer?(o(),r("div",{key:2,class:m([e.ui.footer.base,e.ui.footer.padding,e.ui.footer.background])},[g(e.$slots,"footer")],2)):v("",!0)]),_:3},16,["class"])}const I=p(K,[["render",W]]),Y={};function Z(e,t){const s=D,n=I;return o(),f(n,{class:"country-skeleton"},{header:u(()=>[d(s,{class:"country-skeleton__header"})]),default:u(()=>[d(s,{class:"country-skeleton__default"})]),footer:u(()=>[d(s,{class:"country-skeleton__footer"})]),_:1})}const ee=p(Y,[["render",Z],["__scopeId","data-v-53931e92"]]);function te(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}const N=e=>(E("data-v-85e1ed82"),e=e(),J(),e),se={class:"country-card__header"},oe={class:"country-card__name"},ne={class:"country-card__info"},ae=N(()=>i("span",{class:"country-card__info-title"},"CCA3:",-1)),re={class:"country-card__info-amount"},ce={class:"country-card__info"},ie=N(()=>i("span",{class:"country-card__info-title"},"Population:",-1)),ue={class:"country-card__info-amount"},de=k({__name:"Country",props:{country:{}},setup(e){const t=e;return(s,n)=>{const c=q,a=I,l=X;return o(),f(l,{class:"country-card",to:`/${t.country.cca3}`},{default:u(()=>[d(a,null,{header:u(()=>[i("div",se,[i("span",oe,C(t.country.name.common),1),i("div",ne,[ae,i("span",re,C(t.country.cca3),1)])])]),default:u(()=>[d(c,{is:"map",src:t.country.flags.svg,alt:t.country.flags.alt,class:"country-card__flag",loading:"lazy",width:"256",height:"128",decoding:"auto"},null,8,["src","alt"])]),footer:u(()=>[i("div",ce,[ie,i("span",ue,C(_(te)(t.country.population)),1)])]),_:1})]),_:1},8,["to"])}}}),le=p(de,[["__scopeId","data-v-85e1ed82"]]),_e=M("countries",{state:()=>({countries:[],isFetching:!0}),actions:{async fetchAllCountries(){this.isFetching=!0;try{const{data:e}=await $("https://restcountries.com/v3.1/all?fields=name,flags,cca3,population","$tTfPLNyMi8");this.countries=e.value}catch(e){console.error(e)}finally{this.isFetching=!1}},async searchCountries(e){this.isFetching=!0;try{const{data:t}=await $("https://restcountries.com/v3.1/all?fields=name,flags,cca3,population","$Fp6QXEJsly"),s=t.value,n=s.filter(a=>a.name.common.toLowerCase().includes(e.toLowerCase())),c=s.filter(a=>a.cca3.toLowerCase().includes(e.toLowerCase()));this.countries=[...n,...c]}catch(t){console.error(t)}finally{this.isFetching=!1}}}}),pe={class:"home"},fe={key:0,class:"home__countries-skeleton"},he={key:1,class:"home__countries"},ye={key:2,class:"home__not-found"},me=k({__name:"index",setup(e){const t=R(),s=_e(),n=b(()=>s.isFetching),c=b(()=>s.countries);Q(()=>t.query,()=>{a()});async function a(){await x("countries",()=>{var h;const l=(h=t.query)==null?void 0:h.searchValue;return l?s.searchCountries(l):s.fetchAllCountries()})}return a(),(l,h)=>{const A=ee,L=le;return o(),r("div",pe,[_(n)?(o(),r("div",fe,[(o(),r(S,null,F(24,y=>d(A,{key:y})),64))])):_(c)&&_(c).length?(o(),r("div",he,[(o(!0),r(S,null,F(_(c),(y,B)=>(o(),f(L,{key:B,country:y},null,8,["country"]))),128))])):(o(),r("h2",ye,"Ooops... Countries not found!"))])}}}),ke=p(me,[["__scopeId","data-v-999c4023"]]);export{ke as default};
